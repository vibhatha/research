"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[9495],{4826(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"gazettes/processor","title":"GztProcessor","description":"BETAResearch Work in Progress","source":"@site/docs/gazettes/processor.md","sourceDirName":"gazettes","slug":"/gazettes/processor","permalink":"/research/docs/gazettes/processor","draft":false,"unlisted":false,"editUrl":"https://github.com/vibhatha/research/tree/main/docs/docs/gazettes/processor.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"GztExtractor","permalink":"/research/docs/gazettes/extractor"},"next":{"title":"API Reference","permalink":"/research/docs/gazettes/api-reference"}}');var r=s(4848),i=s(8453);const a={sidebar_position:3},l="GztProcessor",o={},c=[{value:"Features",id:"features",level:2},{value:"Supported Data Types",id:"supported-data-types",level:2},{value:"MinDep (Ministries and Departments)",id:"mindep-ministries-and-departments",level:3},{value:"Person",id:"person",level:3},{value:"Setup",id:"setup",level:2},{value:"Package Installation",id:"package-installation",level:3},{value:"Full Project Setup",id:"full-project-setup",level:3},{value:"Input Formats",id:"input-formats",level:2},{value:"MinDep Initial Gazette",id:"mindep-initial-gazette",level:3},{value:"MinDep Amendment Gazette",id:"mindep-amendment-gazette",level:3},{value:"Person Gazette",id:"person-gazette",level:3},{value:"CSV Output",id:"csv-output",level:2},{value:"MinDep CSV Format",id:"mindep-csv-format",level:3},{value:"Person CSV Format",id:"person-csv-format",level:3},{value:"State Snapshots",id:"state-snapshots",level:2},{value:"MinDep State Example",id:"mindep-state-example",level:3},{value:"Person State Example",id:"person-state-example",level:3},{value:"Project Structure",id:"project-structure",level:2},{value:"Matching Algorithm",id:"matching-algorithm",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"gztprocessor",children:"GztProcessor"})}),"\n",(0,r.jsx)("span",{className:"status-badge status-badge--beta",children:"BETA"}),"\n",(0,r.jsx)("span",{className:"status-text",children:"Research Work in Progress"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:"GztProcessor"})," is a Python library for tracking and versioning structural changes in Sri Lankan government gazettes. It processes the JSON output from GztExtractor and maintains a versioned state of government structure."]}),"\n",(0,r.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Process extracted gazette data (JSON format)"}),"\n",(0,r.jsxs)(n.li,{children:["Detect and classify transactions: ",(0,r.jsx)(n.code,{children:"ADD"}),", ",(0,r.jsx)(n.code,{children:"TERMINATE"}),", ",(0,r.jsx)(n.code,{children:"MOVE"}),", ",(0,r.jsx)(n.code,{children:"RENAME"})]}),"\n",(0,r.jsx)(n.li,{children:"Maintain versioned state snapshots for rollback/history"}),"\n",(0,r.jsx)(n.li,{children:"Output CSVs for Neo4j graph database integration"}),"\n",(0,r.jsx)(n.li,{children:"FastAPI backend for interactive review"}),"\n",(0,r.jsx)(n.li,{children:"React frontend for visualization"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"supported-data-types",children:"Supported Data Types"}),"\n",(0,r.jsx)(n.h3,{id:"mindep-ministries-and-departments",children:"MinDep (Ministries and Departments)"}),"\n",(0,r.jsx)(n.p,{children:"Tracks structural changes in government ministries and departments:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ADD"}),": New department added to a ministry"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"TERMINATE"}),": Department removed from a ministry"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"MOVE"}),": Department transferred between ministries"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"person",children:"Person"}),"\n",(0,r.jsx)(n.p,{children:"Tracks personnel-portfolio assignments:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ADD"}),": New appointment"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"TERMINATE"}),": Removal from position"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"RENAME"}),": Ministry/portfolio name change"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"MOVE"}),": Transfer between portfolios"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"setup",children:"Setup"}),"\n",(0,r.jsx)(n.h3,{id:"package-installation",children:"Package Installation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Basic installation\npip install git+https://github.com/sehansi-9/gztprocessor.git\n\n# For development\npip install -e .\n\n# With API features\npip install "git+https://github.com/sehansi-9/gztprocessor.git#egg=gztprocessor[api]"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"full-project-setup",children:"Full Project Setup"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Navigate to the processor directory:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd gazettes/preprocess\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Install Python dependencies:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"python -m pip install --upgrade pip\npython -m pip install nltk rapidfuzz fastapi uvicorn\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Start the FastAPI backend:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"uvicorn main:app --reload\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The API will be available at ",(0,r.jsx)(n.code,{children:"http://127.0.0.1:8000"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Start the frontend (in a new terminal):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd gztp-frontend\nnpm install\nnpm run dev\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The frontend will be available at ",(0,r.jsx)(n.code,{children:"http://localhost:5173"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"input-formats",children:"Input Formats"}),"\n",(0,r.jsx)(n.h3,{id:"mindep-initial-gazette",children:"MinDep Initial Gazette"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "ministers": [\n    {\n      "name": "Ministry of Finance",\n      "departments": [\n        { "name": "Department of Treasury" },\n        { "name": "Inland Revenue", "previous_ministry": "Ministry of Revenue" }\n      ]\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"mindep-amendment-gazette",children:"MinDep Amendment Gazette"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "transactions": {\n    "moves": [...],\n    "adds": [...],\n    "terminates": [...]\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"person-gazette",children:"Person Gazette"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "transactions": {\n    "moves": [...],\n    "adds": [...],\n    "terminates": [...]\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"csv-output",children:"CSV Output"}),"\n",(0,r.jsxs)(n.p,{children:["CSVs are generated in ",(0,r.jsx)(n.code,{children:"output/"}),", organized by type, date, and gazette number."]}),"\n",(0,r.jsx)(n.h3,{id:"mindep-csv-format",children:"MinDep CSV Format"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csv",children:"transaction_id,parent,parent_type,child,child_type,rel_type,date\n2297-78_tr_01,Minister of Labour,minister,Vocational Training Authority,department,AS_DEPARTMENT,2022-09-16\n"})}),"\n",(0,r.jsx)(n.h3,{id:"person-csv-format",children:"Person CSV Format"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csv",children:'transaction_id,parent,parent_type,child,child_type,rel_type,date\n2067-09_tr_01,"Ministry of Science, Technology & Research",minister,Hon. John Doe,person,AS_APPOINTED,2018-04-12\n'})}),"\n",(0,r.jsx)(n.h2,{id:"state-snapshots",children:"State Snapshots"}),"\n",(0,r.jsxs)(n.p,{children:["Snapshots are saved as JSON in ",(0,r.jsx)(n.code,{children:"state/mindep/"})," and ",(0,r.jsx)(n.code,{children:"state/person/"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"mindep-state-example",children:"MinDep State Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "ministers": [\n    {\n      "name": "Minister of Finance",\n      "departments": ["Department of Treasury", "Inland Revenue", "Customs"]\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"person-state-example",children:"Person State Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "persons": [\n    {\n      "person_name": "Hon. John Doe",\n      "portfolios": [\n        { "name": "Ministry of Roads and Highways", "position": "Minister" }\n      ]\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"project-structure",children:"Project Structure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"preprocess/\n\u251c\u2500\u2500 main.py                 # FastAPI application entry point\n\u251c\u2500\u2500 gztprocessor/           # Core library\n\u2502   \u251c\u2500\u2500 database_handlers/  # Database operations\n\u2502   \u251c\u2500\u2500 gazette_processors/ # Gazette processing logic\n\u2502   \u251c\u2500\u2500 state_managers/     # State management\n\u2502   \u251c\u2500\u2500 db_connections/     # Database connections\n\u2502   \u251c\u2500\u2500 schemas/            # Data schemas\n\u2502   \u2514\u2500\u2500 csv_writer.py       # CSV output\n\u251c\u2500\u2500 routes/                 # API route handlers\n\u251c\u2500\u2500 gztp-frontend/          # React frontend\n\u251c\u2500\u2500 input/                  # Sample input files\n\u251c\u2500\u2500 request_body/           # Sample API payloads\n\u2514\u2500\u2500 pyproject.toml          # Package configuration\n"})}),"\n",(0,r.jsx)(n.h2,{id:"matching-algorithm",children:"Matching Algorithm"}),"\n",(0,r.jsx)(n.p,{children:"For person gazettes, the system uses intelligent matching:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Stemming"}),": NLTK's PorterStemmer for word normalization"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Fuzzy Matching"}),": RapidFuzz for similarity scoring (token sort ratio)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Threshold"}),": Default score of 70 for match suggestions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Word Overlap"}),": Additional matching based on common words"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"These features help identify potential terminates for adds/moves when ministry names have slight variations."})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>a,x:()=>l});var t=s(6540);const r={},i=t.createContext(r);function a(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);